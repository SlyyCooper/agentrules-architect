I001 [*] Import block is un-sorted or un-formatted
  --> agentrules/analyzer.py:8:1
   |
 6 |   """
 7 |
 8 | / from __future__ import annotations
 9 | |
10 | | import asyncio
11 | | import json
12 | | import logging
13 | | import time
14 | | from typing import Optional, Sequence
15 | | from pathlib import Path
16 | |
17 | | from rich.console import Console
18 | | from rich.progress import Progress, SpinnerColumn, TextColumn
19 | |
20 | | from config.agents import MODEL_CONFIG
21 | | from core.analysis import (
22 | |     FinalAnalysis,
23 | |     Phase1Analysis,
24 | |     Phase2Analysis,
25 | |     Phase3Analysis,
26 | |     Phase4Analysis,
27 | |     Phase5Analysis,
28 | | )
29 | | from core.utils.file_creation.cursorignore import create_cursorignore
30 | | from core.utils.file_creation.phases_output import save_phase_outputs
31 | | from core.utils.file_system.tree_generator import get_project_tree
32 | | from core.utils.formatters.clean_cursorrules import clean_cursorrules
33 | | from core.utils.model_config_helper import get_model_config_name
   | |________________________________________________________________^
34 |
35 |   logger = logging.getLogger("project_extractor")
   |
help: Organize imports

UP035 [*] Import from `collections.abc` instead: `Sequence`
  --> agentrules/analyzer.py:14:1
   |
12 | import logging
13 | import time
14 | from typing import Optional, Sequence
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
15 | from pathlib import Path
   |
help: Import from `collections.abc`

UP045 Use `X | None` for type annotations
  --> agentrules/analyzer.py:41:50
   |
39 |     """High-level coordinator for the six-phase analysis pipeline."""
40 |
41 |     def __init__(self, directory: Path, console: Optional[Console] = None):
   |                                                  ^^^^^^^^^^^^^^^^^
42 |         self.directory = directory
43 |         self.console = console or Console()
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/analyzer.py:77:15
   |
75 |         self,
76 |         consolidated_report: dict,
77 |         tree: Optional[Sequence[str]] = None,
   |               ^^^^^^^^^^^^^^^^^^^^^^^
78 |     ) -> dict:
79 |         return await self.final_analyzer.run(consolidated_report, tree)
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
   --> agentrules/analyzer.py:263:44
    |
263 | def run_analysis(directory: Path, console: Optional[Console] = None) -> str:
    |                                            ^^^^^^^^^^^^^^^^^
264 |     analyzer = ProjectAnalyzer(directory, console)
265 |     loop = asyncio.new_event_loop()
    |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/app.py:33:18
   |
31 |     def main(
32 |         ctx: typer.Context,
33 |         version: Optional[bool] = typer.Option(
   |                  ^^^^^^^^^^^^^^
34 |             None,
35 |             "--version",
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/commands/configure.py:22:19
   |
20 |     @app.command()
21 |     def configure(  # type: ignore[func-returns-value]
22 |         provider: Optional[str] = typer.Option(
   |                   ^^^^^^^^^^^^^
23 |             None,
24 |             "--provider",
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/context.py:23:24
   |
23 | def mask_secret(value: Optional[str]) -> str:
   |                        ^^^^^^^^^^^^^
24 |     """Return a masked representation of a secret for safe display."""
   |
help: Convert to `X | None`

UP035 `typing.Dict` is deprecated, use `dict` instead
 --> agentrules/cli/services/configuration.py:6:1
  |
5 | from dataclasses import dataclass
6 | from typing import Dict, Optional
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7 |
8 | from agentrules import model_config
  |

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:23:14
   |
21 |     name: str
22 |     env_var: str
23 |     api_key: Optional[str]
   |              ^^^^^^^^^^^^^
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:34:47
   |
34 | def save_provider_key(provider: str, api_key: Optional[str]) -> None:
   |                                               ^^^^^^^^^^^^^
35 |     set_provider_key(provider, api_key)
36 |     model_config.apply_user_overrides()
   |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
  --> agentrules/cli/services/configuration.py:39:28
   |
39 | def get_provider_keys() -> Dict[str, Optional[str]]:
   |                            ^^^^
40 |     return get_current_provider_keys()
   |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:39:38
   |
39 | def get_provider_keys() -> Dict[str, Optional[str]]:
   |                                      ^^^^^^^^^^^^^
40 |     return get_current_provider_keys()
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:43:35
   |
43 | def get_active_presets(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
   |                                   ^^^^^^^^^^^^^^^^^^^^^^^^
44 |     return model_config.get_active_presets(overrides)
   |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
  --> agentrules/cli/services/configuration.py:43:44
   |
43 | def get_active_presets(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
   |                                            ^^^^
44 |     return model_config.get_active_presets(overrides)
   |
help: Replace with `dict`

UP006 Use `dict` instead of `Dict` for type annotation
  --> agentrules/cli/services/configuration.py:43:71
   |
43 | def get_active_presets(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
   |                                                                       ^^^^
44 |     return model_config.get_active_presets(overrides)
   |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:49:20
   |
47 | def get_available_presets_for_phase(
48 |     phase: str,
49 |     provider_keys: Optional[Dict[str, Optional[str]]] = None,
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
50 | ):
51 |     return model_config.get_available_presets_for_phase(phase, provider_keys)
   |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
  --> agentrules/cli/services/configuration.py:49:29
   |
47 | def get_available_presets_for_phase(
48 |     phase: str,
49 |     provider_keys: Optional[Dict[str, Optional[str]]] = None,
   |                             ^^^^
50 | ):
51 |     return model_config.get_available_presets_for_phase(phase, provider_keys)
   |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:49:39
   |
47 | def get_available_presets_for_phase(
48 |     phase: str,
49 |     provider_keys: Optional[Dict[str, Optional[str]]] = None,
   |                                       ^^^^^^^^^^^^^
50 | ):
51 |     return model_config.get_available_presets_for_phase(phase, provider_keys)
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:54:46
   |
54 | def save_phase_model(phase: str, preset_key: Optional[str]) -> None:
   |                                              ^^^^^^^^^^^^^
55 |     set_phase_model(phase, preset_key)
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/services/configuration.py:58:38
   |
58 | def apply_model_overrides(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
   |                                      ^^^^^^^^^^^^^^^^^^^^^^^^
59 |     return model_config.apply_user_overrides(overrides)
   |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
  --> agentrules/cli/services/configuration.py:58:47
   |
58 | def apply_model_overrides(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
   |                                               ^^^^
59 |     return model_config.apply_user_overrides(overrides)
   |
help: Replace with `dict`

UP006 Use `dict` instead of `Dict` for type annotation
  --> agentrules/cli/services/configuration.py:58:74
   |
58 | def apply_model_overrides(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
   |                                                                          ^^^^
59 |     return model_config.apply_user_overrides(overrides)
   |
help: Replace with `dict`

UP035 `typing.Tuple` is deprecated, use `tuple` instead
 --> agentrules/cli/ui/config_wizard.py:5:1
  |
3 | from __future__ import annotations
4 |
5 | from typing import Any, Optional, Tuple
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 |
7 | import questionary
  |

UP006 Use `tuple` instead of `Tuple` for type annotation
  --> agentrules/cli/ui/config_wizard.py:93:44
   |
91 |     updated = False
92 |
93 |     def _split_preset_label(label: str) -> Tuple[str, Optional[str]]:
   |                                            ^^^^^
94 |         if " (" in label and label.endswith(")"):
95 |             base, remainder = label.split(" (", 1)
   |
help: Replace with `tuple`

UP045 Use `X | None` for type annotations
  --> agentrules/cli/ui/config_wizard.py:93:55
   |
91 |     updated = False
92 |
93 |     def _split_preset_label(label: str) -> Tuple[str, Optional[str]]:
   |                                                       ^^^^^^^^^^^^^
94 |         if " (" in label and label.endswith(")"):
95 |             base, remainder = label.split(" (", 1)
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
   --> agentrules/cli/ui/config_wizard.py:99:46
    |
 97 |         return label, None
 98 |
 99 |     def _variant_display_text(variant_label: Optional[str]) -> str:
    |                                              ^^^^^^^^^^^^^
100 |         if not variant_label:
101 |             return "Default"
    |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
   --> agentrules/cli/ui/config_wizard.py:104:31
    |
102 |         return variant_label[0].upper() + variant_label[1:]
103 |
104 |     def _current_display(key: Optional[str]) -> str:
    |                               ^^^^^^^^^^^^^
105 |         info = model_config.get_preset_info(key) if key else None
106 |         if not info:
    |
help: Convert to `X | None`

UP035 `typing.Dict` is deprecated, use `dict` instead
  --> agentrules/config_service.py:13:1
   |
11 | from dataclasses import dataclass, field
12 | from pathlib import Path
13 | from typing import Dict, Optional
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
14 |
15 | import tomli
   |

UP045 Use `X | None` for type annotations
  --> agentrules/config_service.py:34:14
   |
32 | @dataclass
33 | class ProviderConfig:
34 |     api_key: Optional[str] = None
   |              ^^^^^^^^^^^^^
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/config_service.py:83:46
   |
83 | def set_provider_key(provider: str, api_key: Optional[str]) -> CLIConfig:
   |                                              ^^^^^^^^^^^^^
84 |     config = load_config()
85 |     config.providers[provider] = ProviderConfig(api_key=api_key)
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/config_service.py:91:45
   |
91 | def set_phase_model(phase: str, preset_key: Optional[str]) -> CLIConfig:
   |                                             ^^^^^^^^^^^^^
92 |     config = load_config()
93 |     if preset_key and preset_key.strip():
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
   --> agentrules/config_service.py:101:41
    |
101 | def apply_config_to_environment(config: Optional[CLIConfig] = None) -> None:
    |                                         ^^^^^^^^^^^^^^^^^^^
102 |     config = config or load_config()
103 |     for provider, cfg in config.providers.items():
    |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/config_service.py:111:36
    |
111 | def get_current_provider_keys() -> Dict[str, Optional[str]]:
    |                                    ^^^^
112 |     config = load_config()
113 |     keys: Dict[str, Optional[str]] = {}
    |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
   --> agentrules/config_service.py:111:46
    |
111 | def get_current_provider_keys() -> Dict[str, Optional[str]]:
    |                                              ^^^^^^^^^^^^^
112 |     config = load_config()
113 |     keys: Dict[str, Optional[str]] = {}
    |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/config_service.py:113:11
    |
111 | def get_current_provider_keys() -> Dict[str, Optional[str]]:
112 |     config = load_config()
113 |     keys: Dict[str, Optional[str]] = {}
    |           ^^^^
114 |     for provider in PROVIDER_ENV_MAP.keys():
115 |         cfg = config.providers.get(provider, ProviderConfig())
    |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
   --> agentrules/config_service.py:113:21
    |
111 | def get_current_provider_keys() -> Dict[str, Optional[str]]:
112 |     config = load_config()
113 |     keys: Dict[str, Optional[str]] = {}
    |                     ^^^^^^^^^^^^^
114 |     for provider in PROVIDER_ENV_MAP.keys():
115 |         cfg = config.providers.get(provider, ProviderConfig())
    |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/logging_setup.py:42:23
   |
40 |     *,
41 |     level: int = logging.INFO,
42 |     filtered_loggers: Optional[Iterable[str]] = None,
   |                       ^^^^^^^^^^^^^^^^^^^^^^^
43 | ) -> logging.Logger:
44 |     """
   |
help: Convert to `X | None`

UP035 [*] Import from `collections.abc` instead: `Iterable`
  --> agentrules/model_config.py:9:1
   |
 7 | import os
 8 | from dataclasses import dataclass
 9 | from typing import Dict, Iterable, Optional
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 |
11 | from agentrules.config_service import (
   |
help: Import from `collections.abc`

UP035 `typing.Dict` is deprecated, use `dict` instead
  --> agentrules/model_config.py:9:1
   |
 7 | import os
 8 | from dataclasses import dataclass
 9 | from typing import Dict, Iterable, Optional
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 |
11 | from agentrules.config_service import (
   |

UP045 Use `X | None` for type annotations
  --> agentrules/model_config.py:70:43
   |
70 | def get_default_preset_key(phase: str) -> Optional[str]:
   |                                           ^^^^^^^^^^^^^
71 |     return agent_settings.MODEL_PRESET_DEFAULTS.get(phase)
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/model_config.py:74:34
   |
74 | def get_preset_info(key: str) -> Optional[PresetInfo]:
   |                                  ^^^^^^^^^^^^^^^^^^^^
75 |     return PRESET_INFOS.get(key)
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> agentrules/model_config.py:80:20
   |
78 | def get_available_presets_for_phase(
79 |     phase: str,
80 |     provider_keys: Optional[Dict[str, Optional[str]]] = None,
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
81 | ) -> list[PresetInfo]:
82 |     provider_keys = provider_keys or get_current_provider_keys()
   |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
  --> agentrules/model_config.py:80:29
   |
78 | def get_available_presets_for_phase(
79 |     phase: str,
80 |     provider_keys: Optional[Dict[str, Optional[str]]] = None,
   |                             ^^^^
81 | ) -> list[PresetInfo]:
82 |     provider_keys = provider_keys or get_current_provider_keys()
   |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
  --> agentrules/model_config.py:80:39
   |
78 | def get_available_presets_for_phase(
79 |     phase: str,
80 |     provider_keys: Optional[Dict[str, Optional[str]]] = None,
   |                                       ^^^^^^^^^^^^^
81 | ) -> list[PresetInfo]:
82 |     provider_keys = provider_keys or get_current_provider_keys()
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
   --> agentrules/model_config.py:100:35
    |
100 | def get_active_presets(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^
101 |     overrides = overrides or get_model_overrides()
102 |     active: Dict[str, str] = {}
    |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/model_config.py:100:44
    |
100 | def get_active_presets(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
    |                                            ^^^^
101 |     overrides = overrides or get_model_overrides()
102 |     active: Dict[str, str] = {}
    |
help: Replace with `dict`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/model_config.py:100:71
    |
100 | def get_active_presets(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
    |                                                                       ^^^^
101 |     overrides = overrides or get_model_overrides()
102 |     active: Dict[str, str] = {}
    |
help: Replace with `dict`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/model_config.py:102:13
    |
100 | def get_active_presets(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
101 |     overrides = overrides or get_model_overrides()
102 |     active: Dict[str, str] = {}
    |             ^^^^
103 |     for phase in PHASE_SEQUENCE:
104 |         override = overrides.get(phase)
    |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
   --> agentrules/model_config.py:115:37
    |
115 | def apply_user_overrides(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^
116 |     """
117 |     Apply user-selected model presets to the global MODEL_CONFIG.
    |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/model_config.py:115:46
    |
115 | def apply_user_overrides(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
    |                                              ^^^^
116 |     """
117 |     Apply user-selected model presets to the global MODEL_CONFIG.
    |
help: Replace with `dict`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/model_config.py:115:73
    |
115 | def apply_user_overrides(overrides: Optional[Dict[str, str]] = None) -> Dict[str, str]:
    |                                                                         ^^^^
116 |     """
117 |     Apply user-selected model presets to the global MODEL_CONFIG.
    |
help: Replace with `dict`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/model_config.py:121:14
    |
119 |     """
120 |     overrides = overrides or get_model_overrides()
121 |     applied: Dict[str, str] = {}
    |              ^^^^
122 |
123 |     # reset to defaults first
    |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
   --> agentrules/model_config.py:133:26
    |
131 |         if phase not in agent_settings.MODEL_PRESET_DEFAULTS:
132 |             continue
133 |         override_preset: Optional[PresetDefinition] = agent_settings.MODEL_PRESETS.get(preset_key)
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
134 |         if override_preset is None:
135 |             continue
    |
help: Convert to `X | None`

UP006 Use `dict` instead of `Dict` for type annotation
   --> agentrules/model_config.py:142:60
    |
142 | def _provider_available(provider_slug: str, provider_keys: Dict[str, Optional[str]]) -> bool:
    |                                                            ^^^^
143 |     # first check persisted keys
144 |     if provider_keys.get(provider_slug):
    |
help: Replace with `dict`

UP045 Use `X | None` for type annotations
   --> agentrules/model_config.py:142:70
    |
142 | def _provider_available(provider_slug: str, provider_keys: Dict[str, Optional[str]]) -> bool:
    |                                                                      ^^^^^^^^^^^^^
143 |     # first check persisted keys
144 |     if provider_keys.get(provider_slug):
    |
help: Convert to `X | None`

UP035 [*] Import from `collections.abc` instead: `Sequence`
  --> config/prompts/final_analysis_prompt.py:10:1
   |
 8 | import json
 9 | from datetime import datetime
10 | from typing import Optional, Sequence
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
11 |
12 | # Prompt for the Final Analysis (OpenAI)
   |
help: Import from `collections.abc`

UP035 [*] Import from `collections.abc` instead: `Sequence`
  --> config/prompts/phase_2_prompts.py:10:1
   |
 9 | import json
10 | from typing import Optional, Sequence
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
11 |
12 | # Base prompt template for Phase 2 (Methodical Planning)
   |
help: Import from `collections.abc`

E501 Line too long (124 > 120)
   --> core/agents/anthropic/architect.py:266:121
    |
264 |                         thinking = getattr(delta, "thinking", None)
265 |                         if thinking:
266 |                             yield StreamChunk(StreamEventType.REASONING_DELTA, None, str(thinking), None, None, None, event)
    |                                                                                                                         ^^^^
267 |                         continue
    |

E501 Line too long (123 > 120)
   --> core/agents/anthropic/architect.py:269:121
    |
267 |                         continue
268 |
269 |                     if delta_type == "input_json_delta" and isinstance(index_obj, int) and index_obj in active_tool_inputs:
    |                                                                                                                         ^^^
270 |                         partial = getattr(delta, "partial_json", None)
271 |                         if partial:
    |

UP045 Use `X | None` for type annotations
   --> core/agents/gemini/architect.py:317:17
    |
315 |         client: Any,
316 |         prompt: str,
317 |         config: Optional[genai_types.GenerateContentConfig],
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
318 |     ) -> Iterator[StreamChunk]:
319 |         stream = client.models.generate_content_stream(
    |
help: Convert to `X | None`

UP035 [*] Import from `collections.abc` instead: `Sequence`
  --> core/analysis/final_analysis.py:14:1
   |
13 | import logging  # Used for logging events and errors.
14 | from typing import Optional, Sequence
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
15 |
16 | from config.prompts.final_analysis_prompt import (
   |
help: Import from `collections.abc`

I001 [*] Import block is un-sorted or un-formatted
  --> core/analysis/phase_1.py:13:1
   |
11 |   # ====================================================
12 |
13 | / import asyncio  # For running asynchronous tasks concurrently.
14 | | import json  # For handling JSON data.
15 | | from typing import Any, Optional, Sequence  # For type hinting.
16 | |
17 | | from config.prompts.phase_1_prompts import (  # Prompts used for configuring the agents in Phase 1.
18 | |     DEPENDENCY_AGENT_PROMPT,
19 | |     PHASE_1_BASE_PROMPT,
20 | |     RESEARCHER_AGENT_PROMPT,
21 | |     STRUCTURE_AGENT_PROMPT,
22 | |     TECH_STACK_AGENT_PROMPT,
23 | | )
24 | | from config.tools import TOOL_SETS
25 | | from core.types.tool_config import Tool
26 | | from core.agents.factory.factory import get_architect_for_phase, get_researcher_architect
   | |_________________________________________________________________________________________^
27 |
28 |   try:
   |
help: Organize imports

UP035 [*] Import from `collections.abc` instead: `Sequence`
  --> core/analysis/phase_1.py:15:1
   |
13 | import asyncio  # For running asynchronous tasks concurrently.
14 | import json  # For handling JSON data.
15 | from typing import Any, Optional, Sequence  # For type hinting.
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
16 |
17 | from config.prompts.phase_1_prompts import (  # Prompts used for configuring the agents in Phase 1.
   |
help: Import from `collections.abc`

UP035 [*] Import from `collections.abc` instead: `Sequence`
  --> core/analysis/phase_2.py:13:1
   |
12 | import logging  # Used for logging messages
13 | from typing import Optional, Sequence
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
14 |
15 | from config.prompts.phase_2_prompts import (  # Prompts for Phase 2
   |
help: Import from `collections.abc`

UP045 Use `X | None` for type annotations
  --> core/streaming.py:33:11
   |
32 |     event_type: StreamEventType
33 |     text: Optional[str] = None
   |           ^^^^^^^^^^^^^
34 |     reasoning: Optional[str] = None
35 |     tool_call: Optional[JsonMapping] = None
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> core/streaming.py:34:16
   |
32 |     event_type: StreamEventType
33 |     text: Optional[str] = None
34 |     reasoning: Optional[str] = None
   |                ^^^^^^^^^^^^^
35 |     tool_call: Optional[JsonMapping] = None
36 |     finish_reason: Optional[str] = None
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> core/streaming.py:35:16
   |
33 |     text: Optional[str] = None
34 |     reasoning: Optional[str] = None
35 |     tool_call: Optional[JsonMapping] = None
   |                ^^^^^^^^^^^^^^^^^^^^^
36 |     finish_reason: Optional[str] = None
37 |     usage: Optional[JsonMapping] = None
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> core/streaming.py:36:20
   |
34 |     reasoning: Optional[str] = None
35 |     tool_call: Optional[JsonMapping] = None
36 |     finish_reason: Optional[str] = None
   |                    ^^^^^^^^^^^^^
37 |     usage: Optional[JsonMapping] = None
38 |     raw: Optional[Any] = None
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> core/streaming.py:37:12
   |
35 |     tool_call: Optional[JsonMapping] = None
36 |     finish_reason: Optional[str] = None
37 |     usage: Optional[JsonMapping] = None
   |            ^^^^^^^^^^^^^^^^^^^^^
38 |     raw: Optional[Any] = None
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> core/streaming.py:38:10
   |
36 |     finish_reason: Optional[str] = None
37 |     usage: Optional[JsonMapping] = None
38 |     raw: Optional[Any] = None
   |          ^^^^^^^^^^^^^
   |
help: Convert to `X | None`

B010 [*] Do not call `setattr` with a constant attribute value. It is not any safer than normal property access.
   --> tests/utils/offline_stubs.py:141:5
    |
139 |     # Patch both the module-level factory functions and the package-level re-exports
140 |     fact_module: ModuleType = cast(ModuleType, fact)
141 |     setattr(fact_module, "get_architect_for_phase", get_architect_for_phase_stub)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
142 |     setattr(fact_module, "get_researcher_architect", get_researcher_architect_stub)
143 |     # Re-exported by core.agents and core.agents.factory package __init__
    |
help: Replace `setattr` with assignment

B010 [*] Do not call `setattr` with a constant attribute value. It is not any safer than normal property access.
   --> tests/utils/offline_stubs.py:142:5
    |
140 |     fact_module: ModuleType = cast(ModuleType, fact)
141 |     setattr(fact_module, "get_architect_for_phase", get_architect_for_phase_stub)
142 |     setattr(fact_module, "get_researcher_architect", get_researcher_architect_stub)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
143 |     # Re-exported by core.agents and core.agents.factory package __init__
144 |     try:
    |
help: Replace `setattr` with assignment

B010 [*] Do not call `setattr` with a constant attribute value. It is not any safer than normal property access.
   --> tests/utils/offline_stubs.py:145:9
    |
143 |     # Re-exported by core.agents and core.agents.factory package __init__
144 |     try:
145 |         setattr(agents_pkg, "get_architect_for_phase", get_architect_for_phase_stub)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
146 |     except Exception:
147 |         pass
    |
help: Replace `setattr` with assignment

B010 [*] Do not call `setattr` with a constant attribute value. It is not any safer than normal property access.
   --> tests/utils/offline_stubs.py:151:9
    |
149 |         # Package-level attribute
150 |         from core.agents import factory as factory_pkg  # type: ignore
151 |         setattr(factory_pkg, "get_architect_for_phase", get_architect_for_phase_stub)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
152 |     except Exception:
153 |         pass
    |
help: Replace `setattr` with assignment

B010 [*] Do not call `setattr` with a constant attribute value. It is not any safer than normal property access.
   --> tests/utils/offline_stubs.py:170:13
    |
168 |             continue
169 |         if hasattr(module, "get_architect_for_phase"):
170 |             setattr(module, "get_architect_for_phase", get_architect_for_phase_stub)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
171 |         if module_name == "core.analysis.phase_1" and hasattr(module, "get_researcher_architect"):
172 |             setattr(module, "get_researcher_architect", get_researcher_architect_stub)
    |
help: Replace `setattr` with assignment

B010 [*] Do not call `setattr` with a constant attribute value. It is not any safer than normal property access.
   --> tests/utils/offline_stubs.py:172:13
    |
170 |             setattr(module, "get_architect_for_phase", get_architect_for_phase_stub)
171 |         if module_name == "core.analysis.phase_1" and hasattr(module, "get_researcher_architect"):
172 |             setattr(module, "get_researcher_architect", get_researcher_architect_stub)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
help: Replace `setattr` with assignment

UP045 Use `X | None` for type annotations
  --> typings/tavily/__init__.pyi:16:25
   |
14 |         search_depth: SearchDepth = "basic",
15 |         max_results: int = 5,
16 |         include_images: Optional[bool] = ...,
   |                         ^^^^^^^^^^^^^^
17 |         include_raw_content: Optional[bool] = ...,
18 |     ) -> SearchResponse: ...
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> typings/tavily/__init__.pyi:17:30
   |
15 |         max_results: int = 5,
16 |         include_images: Optional[bool] = ...,
17 |         include_raw_content: Optional[bool] = ...,
   |                              ^^^^^^^^^^^^^^
18 |     ) -> SearchResponse: ...
   |
help: Convert to `X | None`

Found 79 errors.
[*] 15 fixable with the `--fix` option (58 hidden fixes can be enabled with the `--unsafe-fixes` option).
